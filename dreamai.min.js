class DreamAI{static get GPT4(){return"gpt-4"}static get GPT35(){return"gpt-3.5-turbo"}static get DaVinci003(){return"text-davinci-003"}static get DaVinci002(){return"text-davinci-002"}static get DaVinci001(){return"text-davinci-001"}static get Curie001(){return"text-curie-001"}static get Babbage001(){return"text-babbage-001"}static get Ada001(){return"text-ada-001"}constructor(t,e,a){this.openAIKey=t,this.model=e,"g"!==this.model[0]&&(this.temperature=a.temperature,this.top_p=a.top_p,this.frequency_penalty=a.frequency_penalty,this.presence_penalty=a.presence_penalty)}async Complete(t,e,a){let s=[];s[0]={role:"system",content:e.join(" ")},s[1]={role:"assistant",content:t};let n={messages:s,model:this.model,max_tokens:"g"===this.model[0]?4096:512};"g"!==this.model[0]&&(n.temperature=null===this.temperature?.7:this.temperature,n.top_p=null===this.top_p?1:this.top_p,n.frequency_penalty=null===this.frequency_penalty?0:this.frequency_penalty,n.presence_penalty=null===this.presence_penalty?0:this.presence_penalty);let r=await this.#a("https://api.openai.com/v1/chat/completions",n);r?a(r.choices[0].message.content):console.log("DreamAI: No data was returned. Check your API key.")}async Image(t,e,a,s){await this.Images(t,e,a,1,s)}async Images(t,e,a,s,n){if(s>10)console.log("DreamAI: No more than 10 images are allowed.");else{let r=await this.#a("https://api.openai.com/v1/images/generations",{prompt:this.#b(t),n:s,size:e+"x"+a},n);if(r){if(1===s)n(r.data[0].url);else{var i=[];r.data.map(t=>i.push(t.url)),n(i)}}else console.log("DreamAI: No data was returned. Check your API key.")}}#b(t){return t.length<=400?t:t.substring(0,399)}async #a(e,a){return await fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.openAIKey},body:JSON.stringify(a)}).then(t=>t.json()).then(t=>t).catch(t=>{console.error(t)})}}
